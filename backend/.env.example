# =============================================================================
# Django REST API - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# =============================================================================

# Django Configuration
# =============================================================================
DJANGO_SECRET_KEY=your-secret-key-here-change-in-production
DEBUG=True
DJANGO_SETTINGS_MODULE=api.settings
ENVIRONMENT=local

# For production (Cloud Run)
# DEBUG=False
# ENVIRONMENT=production
# ALLOWED_HOSTS=your-api-domain.run.app
# K_SERVICE is automatically set by Cloud Run

# Database Configuration (PostgreSQL)
# =============================================================================
# For local development (native)
DB_NAME=bachata_buddy
DB_USER=postgres
DB_PASSWORD=postgres
DB_HOST=localhost
DB_PORT=5432

# For Docker Compose
# DB_HOST=db

# For production (Cloud Run with Cloud SQL Unix socket)
# CLOUD_SQL_CONNECTION_NAME=PROJECT_ID:REGION:INSTANCE_NAME
# DB_NAME=bachata_buddy
# DB_USER=postgres
# DB_PASSWORD=your-secure-password
# Note: DB_HOST is automatically set to /cloudsql/CLOUD_SQL_CONNECTION_NAME when on Cloud Run

# Google Cloud Configuration
# =============================================================================
GCP_PROJECT_ID=your-project-id
GCP_REGION=us-central1

# Cloud Run Jobs Configuration
# =============================================================================
# Name of the Cloud Run Job for video processing
CLOUD_RUN_JOB_NAME=video-processor

# Google API Keys
# =============================================================================
# Gemini API - Natural language understanding
# Get your API key at: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=your-gemini-api-key-here

# Vector Search Configuration
# =============================================================================
# Cache TTL for FAISS index in seconds (default: 3600 = 1 hour)
MOVE_EMBEDDINGS_CACHE_TTL=3600

# Number of top similar moves to return (default: 50)
VECTOR_SEARCH_TOP_K=50

# Enable GPU acceleration for FAISS (optional, requires FAISS-GPU)
# Options: true, false
FAISS_USE_GPU=false

# Number of cells to visit during search for IVF indices (optional)
# Higher values = more accurate but slower (default: 10)
FAISS_NPROBE=10

# GPU Acceleration Configuration
# =============================================================================
# Global GPU enable/disable flag
# Set to true to enable GPU acceleration across all services
# Requires NVIDIA GPU with CUDA support (e.g., L4 on Cloud Run)
USE_GPU=false

# Per-service GPU flags (override USE_GPU for specific services)
# FAISS GPU for vector similarity search (10-50x speedup)
# FAISS_USE_GPU=false  # Already defined above

# FFmpeg NVENC for video encoding (6-8x speedup)
# Only applicable in job container
FFMPEG_USE_NVENC=false

# Audio GPU processing with torchaudio (3-5x speedup)
AUDIO_USE_GPU=false

# GPU memory allocation fraction (0.0-1.0)
# Controls how much GPU memory to allocate (default: 0.8 = 80%)
GPU_MEMORY_FRACTION=0.8

# GPU fallback configuration
# Enable automatic CPU fallback when GPU unavailable or errors occur
GPU_FALLBACK_ENABLED=true

# GPU operation timeout in seconds
GPU_TIMEOUT_SECONDS=30

# GPU retry count for transient errors
GPU_RETRY_COUNT=3

# For production (Cloud Run with L4 GPU)
# USE_GPU=true
# FAISS_USE_GPU=true
# FFMPEG_USE_NVENC=true
# AUDIO_USE_GPU=true

# Cloud Storage Configuration
# =============================================================================
# For production (Cloud Run)
# GCS_BUCKET_NAME=your-bucket-name
# Note: Leave empty for local development (uses local filesystem)

# CORS Configuration
# =============================================================================
# Allowed origins for CORS (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# For production
# CORS_ALLOWED_ORIGINS=https://your-frontend-domain.run.app

# JWT Configuration
# =============================================================================
# Access token lifetime in minutes (default: 60)
JWT_ACCESS_TOKEN_LIFETIME=60

# Refresh token lifetime in days (default: 7)
JWT_REFRESH_TOKEN_LIFETIME=7

# Rate Limiting Configuration
# =============================================================================
# Requests per minute per user (default: 100)
RATE_LIMIT_PER_MINUTE=100

# Logging Configuration
# =============================================================================
# For local development
LOG_LEVEL=DEBUG
DJANGO_LOG_LEVEL=INFO

# For production
# LOG_LEVEL=INFO
# DJANGO_LOG_LEVEL=WARNING
