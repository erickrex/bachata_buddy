# =============================================================================
# Video Processing Job - Environment Variables
# =============================================================================
# This file documents all environment variables required by the video processing job
# These variables are passed by the Django API when creating Cloud Run Job executions
# =============================================================================

# Task Information (Required)
# =============================================================================
# Unique task identifier (UUID string)
TASK_ID=test-task-123

# User ID who requested the choreography
USER_ID=1

# Blueprint Configuration (Required)
# =============================================================================
# Blueprint JSON containing all choreography parameters and move selections
# This is automatically generated by the backend API and passed to the job
# The blueprint contains:
#   - task_id: Unique task identifier
#   - song: Audio file information (path, duration, bpm, etc.)
#   - moves_used: Array of selected moves with timing and transitions
#   - video_output: Output video configuration
# 
# Example structure:
# BLUEPRINT_JSON={
#   "task_id": "uuid-string",
#   "song": {
#     "audio_path": "/app/data/songs/test.mp3",
#     "duration": 180.5,
#     "bpm": 120,
#     "key": "C major"
#   },
#   "moves_used": [
#     {
#       "move_id": "basic_step_001",
#       "move_name": "Basic Step",
#       "video_path": "/app/data/moves/basic_step.mp4",
#       "start_time": 0.0,
#       "duration": 8.0,
#       "transition": "crossfade"
#     }
#   ],
#   "video_output": {
#     "path": "/app/output/choreography.mp4",
#     "format": "mp4",
#     "resolution": "1920x1080"
#   }
# }
BLUEPRINT_JSON=

# Database Configuration (Required)
# =============================================================================
# PostgreSQL connection details
# For local development (Docker Compose) - TCP/IP connection
DB_HOST=db
DB_PORT=5432
DB_NAME=bachata_vibes
DB_USER=postgres
DB_PASSWORD=postgres

# For production (Cloud Run with Cloud SQL Unix socket)
# The job automatically detects Cloud Run via K_SERVICE environment variable
# and uses Unix socket connection when CLOUD_SQL_CONNECTION_NAME is set
# CLOUD_SQL_CONNECTION_NAME=PROJECT_ID:REGION:INSTANCE_NAME
# DB_NAME=bachata_buddy
# DB_USER=postgres
# DB_PASSWORD=your-secure-password

# Note: Elasticsearch has been removed from the job container
# All move selection and intelligence is now handled by the backend API
# The job container only assembles videos based on the blueprint

# Google Cloud Configuration (Required for production)
# =============================================================================
# Google Cloud project ID
GCP_PROJECT_ID=your-project-id

# Google Cloud region
GCP_REGION=us-central1

# Google API Keys (Required)
# =============================================================================
# Gemini API key for AI-powered choreography generation
# Get your API key at: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=your-gemini-api-key-here

# Cloud Storage Configuration (Required for production)
# =============================================================================
# Google Cloud Storage bucket name for videos and audio files
GCS_BUCKET_NAME=your-bucket-name

# For local development, leave empty to use local filesystem
# GCS_BUCKET_NAME=

# Video Processing Configuration (Optional)
# =============================================================================
# YOLOv8 model file for pose detection
YOLOV8_MODEL=yolov8n-pose.pt

# YOLOv8 confidence threshold (0.0-1.0)
YOLOV8_CONFIDENCE=0.3

# YOLOv8 device (cpu or cuda)
YOLOV8_DEVICE=cpu

# YOLOv8 IOU threshold for NMS (0.0-1.0)
YOLOV8_IOU_THRESHOLD=0.5

# YOLOv8 maximum detections per image
YOLOV8_MAX_DET=10

# FFmpeg Configuration (Optional)
# =============================================================================
# Video output format
VIDEO_OUTPUT_FORMAT=mp4

# Video codec
VIDEO_CODEC=libx264

# Video quality (CRF: 0-51, lower is better quality)
VIDEO_CRF=23

# Video frame rate
VIDEO_FPS=30

# Audio codec
AUDIO_CODEC=aac

# Audio bitrate
AUDIO_BITRATE=128k

# Logging Configuration (Optional)
# =============================================================================
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Python Configuration (Optional)
# =============================================================================
# Disable Python bytecode generation
PYTHONDONTWRITEBYTECODE=1

# Force unbuffered output for real-time logging
PYTHONUNBUFFERED=1

# =============================================================================
# Usage Examples
# =============================================================================

# Local Development with Docker Compose:
# docker-compose --profile job run --rm job

# Manual Testing with Custom Parameters:
# docker-compose --profile job run --rm \
#   -e TASK_ID=custom-task-123 \
#   -e USER_ID=42 \
#   -e AUDIO_INPUT=/app/data/songs/custom.mp3 \
#   -e DIFFICULTY=advanced \
#   -e ENERGY_LEVEL=high \
#   -e STYLE=modern \
#   job

# Production (Cloud Run Jobs):
# Environment variables are passed by the Django API when creating job executions
# See: backend/services/jobs_service.py

